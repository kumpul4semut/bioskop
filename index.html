<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
    <!-- my style app -->
    <link rel="stylesheet" href="app.css" />
    <title>Penonton Bioskop</title>
  </head>
  <body>
    <!-- container -->
    <div class="container bg-bioskop mt-3">
      <!-- keterangan warna kursi -->
      <div class="row chairs-info">
        <div class="col mt-4">
          <div class="d-flex">
            <div class="chair-avaible"></div>
            <span>Tersedia</span>
          </div>
        </div>
        <div class="col mt-4">
          <div class="d-flex">
            <div class="chair-non-avaible"></div>
            <span>Tidak Tersedia</span>
          </div>
        </div>
        <div class="col mt-4">
          <div class="d-flex">
            <div class="chair-selected"></div>
            <span>Pilihanmu</span>
          </div>
        </div>
      </div>

      <!-- layar bioskop -->
      <div class="bioskop-screen mt-3">
        <span>Layar Bioskop Disini</span>
      </div>

      <!-- main kursi -->
      <section id="main">
        <div class="row mt-5 d-flex justify-content-center gap-1">
          <div class="col-1">
            <div class="chair-avaible">A1</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">A2</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">A3</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">A4</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">A5</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">A6</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">A7</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">A8</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">A9</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">A10</div>
          </div>
        </div>
        <div class="row mt-5 d-flex justify-content-center gap-1">
          <div class="col-1">
            <div class="chair-avaible">B1</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">B2</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">B3</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">B4</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">B5</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">B6</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">B7</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">B8</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">B9</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">B10</div>
          </div>
        </div>
        <div class="row mt-5 d-flex justify-content-center gap-1">
          <div class="col-1">
            <div class="chair-avaible">C1</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">C2</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">C3</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">C4</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">C5</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">C6</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">C7</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">C8</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">C9</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">C10</div>
          </div>
        </div>
        <div class="row mt-5 d-flex justify-content-center gap-1">
          <div class="col-1">
            <div class="chair-avaible">D1</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">D2</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">D3</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">D4</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">D5</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">D6</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">D7</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">D8</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">D9</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">D10</div>
          </div>
        </div>
        <div class="row mt-5 d-flex justify-content-center gap-1">
          <div class="col-1">
            <div class="chair-avaible">E1</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">E2</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">E3</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">E4</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">E5</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">E6</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">E7</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">E8</div>
          </div>
          <div class="col-1">
            <div class="chair-avaible">E9</div>
          </div>
          <div class="col-1">
            <div class="chair-non-avaible">E10</div>
          </div>
        </div>
      </section>

      <!-- sumarry -->
      <div class="row mt-5">
        <div class="col">
          <div class="text-white text-center">TOTAL HARGA</div>
          <div class="text-white text-center mt-3" id="sum-ticket"></div>
        </div>
        <div class="col vl">
          <div class="text-white text-center">TEMPAT DUDUK</div>
          <div
            class="d-flex justify-content-center mt-3"
            id="chair-selected-group"
          ></div>
        </div>
      </div>

      <!-- button ringkasan order -->
      <div class="row mt-3">
        <div class="col d-flex justify-content-center">
          <button class="btn-order">Order</button>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>

    <script>
      const chair_selected = document.querySelectorAll("#main .chair-selected");
      const chair_avaible = document.querySelectorAll("#main .chair-avaible");
      const chair_selected_group = document.querySelector(
        "#chair-selected-group"
      );
      const sum_ticket = document.querySelector("#sum-ticket");

      let data_chair_selected = [];
      let price_per_ticket = 30000;
      let data_sum_price = 0;

      for (var i = 0; i < chair_avaible.length; i++) {
        chair_avaible[i].addEventListener("click", function (e) {
          // for change chair to selected theme
          e.target.classList.remove("chair-avaible");
          e.target.classList.add("chair-selected");

          var chair_selected = e.target.innerText;
          // check kursi sudah di click
          var chair_check = data_chair_selected.includes(chair_selected);

          if (chair_check == false) {
            // save to data chair selected
            data_chair_selected.push(chair_selected);
            // for add the chair to group chair selected
            var html_chair_selected = `<div class="chair-selected">${chair_selected}</div>`;
            chair_selected_group.insertAdjacentHTML(
              "beforeend",
              html_chair_selected
            );
            // count total harga
            data_sum_price += price_per_ticket;
            sum_ticket.innerHTML = formatRupiah(
              data_sum_price.toString(),
              "Rp"
            );
          }
        });
      }

      function formatRupiah(angka, prefix) {
        var number_string = angka.replace(/[^,\d]/g, "").toString(),
          split = number_string.split(","),
          sisa = split[0].length % 3,
          rupiah = split[0].substr(0, sisa),
          ribuan = split[0].substr(sisa).match(/\d{3}/gi);

        // tambahkan titik jika yang di input sudah menjadi angka ribuan
        if (ribuan) {
          separator = sisa ? "." : "";
          rupiah += separator + ribuan.join(".");
        }

        rupiah = split[1] != undefined ? rupiah + "," + split[1] : rupiah;
        return prefix == undefined ? rupiah : rupiah ? "Rp. " + rupiah : "";
      }
    </script>
  </body>
</html>
